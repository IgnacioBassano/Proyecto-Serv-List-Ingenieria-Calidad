<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <meta name="theme-color" content="#d97706" />
  <title>Serv-list Â· Mi perfil</title>

  <script>
    (function() {
      const theme = localStorage.getItem("theme");
      if (theme === "dark") document.documentElement.classList.add("dark");
    })();
  </script>

  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&display=swap" rel="stylesheet">
</head>

<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html">Serv-list</a>
      <nav class="nav"></nav>
    </div>
  </header>

  <main class="container perfil-dashboard">
    <!-- PANEL LATERAL -->
    <aside class="perfil-sidebar">
      <div class="perfil-avatar-wrapper">
        <img id="avatar-img" src="assets/avatar-placeholder.png" alt="Avatar">
        <label for="avatar-input" class="avatar-edit-btn">ğŸ“·</label>
        <input type="file" id="avatar-input" accept="image/*" hidden>
      </div>

      <h2 id="nombre-usuario">Usuario</h2>
      <p id="email-usuario" class="muted"></p>
      <p id="rol-usuario" class="rol-tag">Rol: â€”</p>

      <div class="perfil-resumen">
        <p><strong>ğŸ“ Localidad:</strong> <span id="localidad-resumen">â€”</span></p>
        <p><strong>ğŸ“ TelÃ©fono:</strong> <span id="telefono-resumen">â€”</span></p>
        <p><strong>ğŸ› ï¸ Servicios publicados:</strong> <span id="servicios-count">0</span></p>
      </div>
    </aside>

    <!-- CONTENIDO PRINCIPAL -->
    <section class="perfil-main">
      <!-- Tabs -->
      <div class="tabs">
        <button class="perfil-tab active" data-tab="datos">Datos personales</button>
        <button class="perfil-tab" data-tab="servicios">Servicios</button>
        <button class="perfil-tab" data-tab="seguridad">Seguridad</button>
        <button class="perfil-tab" data-tab="turnos">Turnos</button>
        <button class="perfil-tab" data-tab="reseÃ±as">ReseÃ±as</button>
      </div>

      <!-- DATOS PERSONALES -->
      <div id="datos" class="tab-content" style="display:block;">
        <form id="perfil-form" class="perfil-form">
          <div class="editable-field">
            <label>Nombre completo</label>
            <div class="field-group">
              <input type="text" id="nombre" readonly />
              <button type="button" class="edit-btn">âœï¸</button>
            </div>
          </div>

          <div class="editable-field">
            <label>Email</label>
            <div class="field-group">
              <input type="email" id="email" readonly />
              <button type="button" class="edit-btn">âœï¸</button>
            </div>
          </div>

          <div class="editable-field">
            <label>TelÃ©fono</label>
            <div class="field-group">
              <input type="tel" id="telefono" readonly />
              <button type="button" class="edit-btn">âœï¸</button>
            </div>
          </div>

          <div class="editable-field">
            <label>Localidad</label>
            <div class="field-group">
              <input type="text" id="localidad" readonly />
              <button type="button" class="edit-btn">âœï¸</button>
            </div>
          </div>

          <button type="submit" class="btn guardar-btn" style="display:none;">ğŸ’¾ Guardar cambios</button>
        </form>
      </div>

      <!-- SERVICIOS -->
      <div id="servicios" class="tab-content" style="display:none;">
        <h2>Mis servicios</h2>
        <ul class="servicios-list"></ul>
      </div>

      <!-- SEGURIDAD -->
      <div id="seguridad" class="tab-content" style="display:none;">
        <h2>Cambiar contraseÃ±a</h2>

        <form id="password-form" class="perfil-form">
          <label>ContraseÃ±a actual</label>
          <input type="password" id="current-pass" placeholder="Tu contraseÃ±a actual" required>

          <label>Nueva contraseÃ±a</label>
          <input type="password" id="new-pass" placeholder="Debe tener mayÃºscula, minÃºscula y nÃºmero" required>

          <label>Confirmar nueva contraseÃ±a</label>
          <input type="password" id="confirm-pass" placeholder="RepetÃ­ la nueva contraseÃ±a" required>

          <!-- Barra visual de fortaleza -->
          <div id="password-strength">
            <div id="strength-bar"></div>
          </div>
          <span id="strength-text"></span>

          <!-- Requisitos -->
          <ul id="password-requisitos">
            <li id="req-length" class="invalid">MÃ­nimo 6 caracteres</li>
            <li id="req-upper" class="invalid">Al menos una mayÃºscula (Aâ€“Z)</li>
            <li id="req-lower" class="invalid">Al menos una minÃºscula (aâ€“z)</li>
            <li id="req-number" class="invalid">Al menos un nÃºmero (0â€“9)</li>
            <li id="req-match" class="invalid">Las contraseÃ±as coinciden</li>
          </ul>

          <button type="submit" id="btn-password" class="btn" style="margin-top:18px;" disabled>
            Actualizar contraseÃ±a
          </button>
        </form>
      </div>

      <!-- TURNOS -->
      <div id="turnos" class="tab-content" style="display:none;">
        <h2>Mis turnos</h2>
        <ul id="lista-turnos" class="servicios-list"></ul>
      </div>

      <!-- RESEÃ‘AS -->
<div id="reseÃ±as" class="tab-content" style="display:none;">
  <h2>ReseÃ±as recibidas</h2>
  <ul id="lista-resenas" class="servicios-list"></ul>
</div>

    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p class="muted">Â© 2025 Serv-list Â· Proyecto de IngenierÃ­a y Calidad de Software</p>
    </div>
  </footer>

  <!-- âœï¸ Modal de ediciÃ³n de servicio -->
  <div id="editar-modal" class="modal">
    <div class="modal-content">
      <h2>Editar servicio</h2>
      <form id="editar-form">
        <input type="hidden" id="edit-id">

        <label for="edit-titulo">TÃ­tulo</label>
        <input type="text" id="edit-titulo" required>

        <label for="edit-categoria">CategorÃ­a</label>
        <input type="text" id="edit-categoria" required>

        <label for="edit-ubicacion">UbicaciÃ³n</label>
        <input type="text" id="edit-ubicacion" required>

        <label for="edit-comentario">Comentario</label>
        <textarea id="edit-comentario" required></textarea>

        <div class="modal-buttons">
          <button type="submit" class="btn-guardar">ğŸ’¾ Guardar cambios</button>
          <button type="button" id="cerrar-modal" class="btn-cerrar">âŒ Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <script src="scripts/nav.js"></script>
  <script src="scripts/theme.js"></script>
  <script src="scripts/perfil.js"></script>
</body>
</html>
